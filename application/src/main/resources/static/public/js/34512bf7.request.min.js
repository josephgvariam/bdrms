var bdRequest=function(){var o=Backbone.Model.extend({defaults:{ref1:"",ref2:"",ref3:"",ref4:"",ref5:"",status:null,type:null}}),d=new(Backbone.Collection.extend({model:o})),r=[],e=Marionette.View.extend({tagName:"tr",template:"#record-row-template"}),t=Marionette.View.extend({template:_.template("No Records. Start adding records.")}),a=Marionette.CollectionView.extend({tagName:"tbody",childView:e,emptyView:t}),n=Marionette.View.extend({template:"#records-template",regions:{body:{el:"tbody",replaceElement:!0}},initialize:function(){},events:{"click #addRecordsButton":"showRecordsModal","click #okModalButton":"addRecords"},addRecords:function(e){var t=$("#recordsDataTable").DataTable().rows([".selected"]).data().toArray(),r=[];d.reset(),_.each(t,function(e,t){var a=new o(e);d.add(a),r.push(e.id)},this),$("#inventoryItemsField").val(r.toString()),$("#recordsModal").modal("hide")},showRecordsModal:function(e){e.preventDefault();var t=$("#storagetypesselect2").select2("data")[0];if(t){var a=t.text;$("#recordsModal").modal({show:!0,backdrop:"static",keyboard:!1});$("#recordsDataTable").DataTable({retrieve:!0,searching:!0,ordering:!1,rowId:"id",ajax:{url:"/api/inventoryitems?storageType="+a+"&requestType="+bdRequest.requestType,dataSrc:""},columns:[{data:"id"},{data:"id"},{data:a.toLowerCase()+"Barcode"},{data:"ref1"},{data:"ref2"},{data:"ref3"},{data:"ref4"},{data:"ref5"}],columnDefs:[{targets:0,checkboxes:{selectRow:!0}}],select:{style:"multi"}});$("#recordsModal").on("shown.bs.modal",function(){var t=$("#recordsDataTable").DataTable();t.columns.adjust(),_.each(r,function(e){t.row("#"+e).select()})})}else swal("Error!","Please select a Storage Type first!","error")},onRender:function(){this.showChildView("body",new a({collection:d}))}});return(new(Marionette.Application.extend({region:"#app",onStart:function(){var e=new n;this.showView(e)}}))).start(),{InventoryItem:o,inventoryItems:d,selectedInventoryItems:r,requestType:""}}();$(function(){$("#storagetypesselect2").on("select2:select",function(e){$.fn.DataTable.isDataTable("#recordsDataTable")&&($("#recordsDataTable").DataTable().destroy(),bdRequest.inventoryItems.reset())})});